(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(41)},29:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(21),i=a.n(r),c=a(10),l=a(11),s=a(14),u=a(12),d=a(15),m=a(9),h="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:f},k=function(){return fetch("".concat(h,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books})},p=function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(h,"/search"),{method:"POST",headers:Object(m.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(29),function(e){var t=e.shelf,a=e.shelfHandler,n=e.book;return o.a.createElement("select",{value:t,onChange:function(e){return a(e.target.value,n)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))}),y=a(6),g=function(e){var t=e.books,a=e.shelfHandler,n=t.title,r=t.authors,i=t.imageLinks,c=t.shelf;return o.a.createElement(y.a.li,{whileHover:{scale:1.1}},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},i?o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(".concat(i.thumbnail,")")}}):o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(book.png)"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement(E,{shelf:c,book:t,shelfHandler:a}))),o.a.createElement("div",{className:"book-title"},n),o.a.createElement("div",{className:"book-authors"},r?r.map(function(e){return o.a.createElement("div",{key:e},e)}):o.a.createElement("span",null,"No authors found."))))},N=function(e){var t=e.status,a=e.books,n=e.shelfHandler,r=a.filter(function(e){return e.shelf===t}),i=r.length;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},function(e){var t;switch(e){case"currentlyReading":t="Currently Reading";break;case"wantToRead":t="Want To Read";break;case"read":t="Read";break;default:t="None"}return t}(t)+" "+i+" books"),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},r.map(function(e){return o.a.createElement(g,{books:e,key:e.id,shelfHandler:n})}))))},j=[.6,-.05,.01,.99],w={initial:{y:60,opacity:0},animate:{y:0,opacity:1,transition:{duration:.6,ease:j}}},O={initial:{y:-60,opacity:0},animate:{y:0,opacity:1,transition:{duration:.4,ease:j}}},S=function(e){var t=e.books,a=e.loading,n=t.length;return o.a.createElement(y.a.div,{variants:O,initial:"initial",animate:"animate"},o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement(y.a.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1}},"MyReads"),a?"":o.a.createElement(y.a.h3,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{delay:1.1}},"Current Book Shelf : ",n))))},H=a(23),R=a(8),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={search:[],query:!1},a.searchBooks=function(e){""!==e?v(e).then(function(e){if("undefined"!==e.error&&"empty query"!==e.error){var t=a.props.books,n=[];e.forEach(function(e){var a=t.find(function(t){return t.id===e.id});null!=a&&n.push(a)});var o=e.map(function(e){return Object(m.a)({},e,{shelf:"none"})}),r=n.concat(Object(H.a)(o)),i=Array.from(new Set(r.map(function(e){return e.id}))).map(function(e){return r.find(function(t){return t.id===e})});a.setState(function(){return{search:i,query:!0}})}else a.setState(function(){return{search:[],query:!1}})}):a.setState(function(){return{search:[],query:!1}})},a.shelfHandler=function(e,t){"none"!==e&&p(t,e).then(function(n){var o=a.state.search.map(function(a){return a.id===t.id?Object.assign({},a,{shelf:e}):a});a.setState(function(){return{search:o}}),a.props.addNewBook(Object(m.a)({},t,{shelf:e}))})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.query;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(R.b,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.searchBooks(t.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},n?a.map(function(t){return o.a.createElement(g,{books:t,key:t.id,shelfHandler:e.shelfHandler})}):o.a.createElement("div",null,"No data enter a book or author."))))}}]),t}(o.a.Component),A=a(0),B={initial:{x:"100vw",opacity:0},animate:{x:0,opacity:1},transition:{ease:"easeIn",duration:.5}};var T=function(){return o.a.createElement(y.a.div,{className:"loader"},o.a.createElement(y.a.div,{initial:"initial",variants:B,animate:"animate"},"Loading...."))},q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={books:[],loading:!0},a.loadAllData=function(){a.setState(function(){return{loading:!0}}),k().then(function(e){a.setState(function(){return{books:e,loading:!1}})})},a.shelfHandler=function(e,t){p(t,e).then(function(){var n=a.state.books.map(function(a){return a.id===t.id?Object.assign({},a,{shelf:e}):a}).filter(function(e){return"none"!==e.shelf});a.setState(function(){return{books:n}})})},a.addNewBook=function(e){a.setState(function(t){return{books:t.books.concat([e])}})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadAllData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.books,n=t.loading;return o.a.createElement("div",{className:"app"},o.a.createElement(A.a,{path:"/search",render:function(){return o.a.createElement(C,{books:a,addNewBook:e.addNewBook})}}),o.a.createElement(A.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",null,o.a.createElement(S,{books:a,loading:n}),o.a.createElement("div",{className:"list-books-content"},n?o.a.createElement(T,null):o.a.createElement(y.a.div,{variants:w,initial:"initial",animate:"animate"},o.a.createElement(N,{status:"currentlyReading",books:a,shelfHandler:e.shelfHandler}),o.a.createElement(N,{status:"wantToRead",books:a,shelfHandler:e.shelfHandler}),o.a.createElement(N,{status:"read",books:a,shelfHandler:e.shelfHandler}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(R.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))))}}))}}]),t}(o.a.Component);a(39);i.a.render(o.a.createElement(R.a,null,o.a.createElement(q,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.631b1db7.chunk.js.map